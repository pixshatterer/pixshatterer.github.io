(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();const Ne=!1,Pe=(e,t)=>e===t,S=Symbol("solid-proxy"),se=Symbol("solid-track"),M={equals:Pe};let ce=ge;const v=1,U=2,fe={owned:null,cleanups:null,context:null,owner:null};var g=null;let z=null,Oe=null,c=null,d=null,w=null,K=0;function xe(e,t){const n=c,s=g,i=e.length===0,l=t===void 0?s:t,r=i?fe:{owned:null,cleanups:null,context:l?l.context:null,owner:l},o=i?e:()=>e(()=>W(()=>P(r)));g=r,c=null;try{return T(o,!0)}finally{c=n,g=s}}function V(e,t){t=t?Object.assign({},M,t):M;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.value)),de(n,i));return[ue.bind(n),s]}function j(e,t,n){const s=te(e,t,!1,v);D(s)}function De(e,t,n){ce=Me;const s=te(e,t,!1,v);s.user=!0,w?w.push(s):D(s)}function Re(e,t,n){n=n?Object.assign({},M,n):M;const s=te(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,D(s),ue.bind(s)}function $e(e){return T(e,!1)}function W(e){if(c===null)return e();const t=c;c=null;try{return e()}finally{c=t}}function Le(e){De(()=>W(e))}function J(){return c}function ue(){if(this.sources&&this.state)if(this.state===v)D(this);else{const e=d;d=null,T(()=>F(this),!1),d=e}if(c){const e=this.observers?this.observers.length:0;c.sources?(c.sources.push(this),c.sourceSlots.push(e)):(c.sources=[this],c.sourceSlots=[e]),this.observers?(this.observers.push(c),this.observerSlots.push(c.sources.length-1)):(this.observers=[c],this.observerSlots=[c.sources.length-1])}return this.value}function de(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&T(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i],r=z&&z.running;r&&z.disposed.has(l),(r?!l.tState:!l.state)&&(l.pure?d.push(l):w.push(l),l.observers&&pe(l)),r||(l.state=v)}if(d.length>1e6)throw d=[],new Error},!1)),t}function D(e){if(!e.fn)return;P(e);const t=K;ke(e,e.value,t)}function ke(e,t,n){let s;const i=g,l=c;c=g=e;try{s=e.fn(t)}catch(r){return e.pure&&(e.state=v,e.owned&&e.owned.forEach(P),e.owned=null),e.updatedAt=n+1,ye(r)}finally{c=l,g=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?de(e,s):e.value=s,e.updatedAt=n)}function te(e,t,n,s=v,i){const l={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:g,context:g?g.context:null,pure:n};return g===null||g!==fe&&(g.owned?g.owned.push(l):g.owned=[l]),l}function B(e){if(e.state===0)return;if(e.state===U)return F(e);if(e.suspense&&W(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<K);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===v)D(e);else if(e.state===U){const s=d;d=null,T(()=>F(e,t[0]),!1),d=s}}function T(e,t){if(d)return e();let n=!1;t||(d=[]),w?n=!0:w=[],K++;try{const s=e();return Ie(n),s}catch(s){n||(w=null),d=null,ye(s)}}function Ie(e){if(d&&(ge(d),d=null),e)return;const t=w;w=null,t.length&&T(()=>ce(t),!1)}function ge(e){for(let t=0;t<e.length;t++)B(e[t])}function Me(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:B(s)}for(t=0;t<n;t++)B(e[t])}function F(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const i=s.state;i===v?s!==t&&(!s.updatedAt||s.updatedAt<K)&&B(s):i===U&&F(s,t)}}}function pe(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=U,n.pure?d.push(n):w.push(n),n.observers&&pe(n))}}function P(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const l=i.pop(),r=n.observerSlots.pop();s<i.length&&(l.sourceSlots[r]=s,i[s]=l,n.observerSlots[s]=r)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)P(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)P(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Ue(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ye(e,t=g){throw Ue(e)}function je(e,t){return W(()=>e(t||{}))}const Be=e=>Re(()=>e());function Fe(e,t,n){let s=n.length,i=t.length,l=s,r=0,o=0,a=t[i-1].nextSibling,u=null;for(;r<i||o<l;){if(t[r]===n[o]){r++,o++;continue}for(;t[i-1]===n[l-1];)i--,l--;if(i===r){const f=l<s?o?n[o-1].nextSibling:n[l-o]:a;for(;o<l;)e.insertBefore(n[o++],f)}else if(l===o)for(;r<i;)(!u||!u.has(t[r]))&&t[r].remove(),r++;else if(t[r]===n[l-1]&&n[o]===t[i-1]){const f=t[--i].nextSibling;e.insertBefore(n[o++],t[r++].nextSibling),e.insertBefore(n[--l],f),t[i]=n[l]}else{if(!u){u=new Map;let p=o;for(;p<l;)u.set(n[p],p++)}const f=u.get(t[r]);if(f!=null)if(o<f&&f<l){let p=r,_=1,R;for(;++p<i&&p<l&&!((R=u.get(t[p]))==null||R!==f+_);)_++;if(_>f-o){const $=t[r];for(;o<f;)e.insertBefore(n[o++],$)}else e.replaceChild(n[o++],t[r++])}else r++;else t[r++].remove()}}}function Ge(e,t,n,s={}){let i;return xe(l=>{i=l,t===document?e():y(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{i(),t.textContent=""}}function he(e,t,n,s){let i;const l=()=>{const o=document.createElement("template");return o.innerHTML=e,o.content.firstChild},r=()=>(i||(i=l())).cloneNode(!0);return r.cloneNode=r,r}function ie(e,t){t==null?e.removeAttribute("class"):e.className=t}function y(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return G(e,t,s,n);j(i=>G(e,t(),i,n),s)}function G(e,t,n,s,i){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,r=s!==void 0;if(e=r&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(l==="number"&&(t=t.toString(),t===n))return n;if(r){let o=n[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=b(e,n,s,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean")n=b(e,n,s);else{if(l==="function")return j(()=>{let o=t();for(;typeof o=="function";)o=o();n=G(e,o,n,s)}),()=>n;if(Array.isArray(t)){const o=[],a=n&&Array.isArray(n);if(Z(o,t,n,i))return j(()=>n=G(e,o,n,s,!0)),()=>n;if(o.length===0){if(n=b(e,n,s),r)return n}else a?n.length===0?le(e,o,s):Fe(e,n,o):(n&&b(e),le(e,o));n=o}else if(t.nodeType){if(Array.isArray(n)){if(r)return n=b(e,n,s,t);b(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Z(e,t,n,s){let i=!1;for(let l=0,r=t.length;l<r;l++){let o=t[l],a=n&&n[e.length],u;if(!(o==null||o===!0||o===!1))if((u=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=Z(e,o,a)||i;else if(u==="function")if(s){for(;typeof o=="function";)o=o();i=Z(e,Array.isArray(o)?o:[o],Array.isArray(a)?a:[a])||i}else e.push(o),i=!0;else{const f=String(o);a&&a.nodeType===3&&a.data===f?e.push(a):e.push(document.createTextNode(f))}}return i}function le(e,t,n=null){for(let s=0,i=t.length;s<i;s++)e.insertBefore(t[s],n)}function b(e,t,n,s){if(n===void 0)return e.textContent="";const i=s||document.createTextNode("");if(t.length){let l=!1;for(let r=t.length-1;r>=0;r--){const o=t[r];if(i!==o){const a=o.parentNode===e;!l&&!r?a?e.replaceChild(i,o):e.insertBefore(i,n):a&&o.remove()}else l=!0}}else e.insertBefore(i,n);return[i]}const ee=Symbol("store-raw"),A=Symbol("store-node"),h=Symbol("store-has"),we=Symbol("store-self");function ve(e){let t=e[S];if(!t&&(Object.defineProperty(e,S,{value:t=new Proxy(e,qe)}),!Array.isArray(e))){const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let i=0,l=n.length;i<l;i++){const r=n[i];s[r].get&&Object.defineProperty(e,r,{enumerable:s[r].enumerable,get:s[r].get.bind(t)})}}return t}function Y(e){let t;return e!=null&&typeof e=="object"&&(e[S]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function O(e,t=new Set){let n,s,i,l;if(n=e!=null&&e[ee])return n;if(!Y(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let r=0,o=e.length;r<o;r++)i=e[r],(s=O(i,t))!==i&&(e[r]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const r=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let a=0,u=r.length;a<u;a++)l=r[a],!o[l].get&&(i=e[l],(s=O(i,t))!==i&&(e[l]=s))}return e}function H(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function x(e,t,n){if(e[t])return e[t];const[s,i]=V(n,{equals:!1,internal:!0});return s.$=i,e[t]=s}function Ye(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===S||t===A||(delete n.value,delete n.writable,n.get=()=>e[S][t]),n}function me(e){J()&&x(H(e,A),we)()}function He(e){return me(e),Reflect.ownKeys(e)}const qe={get(e,t,n){if(t===ee)return e;if(t===S)return n;if(t===se)return me(e),n;const s=H(e,A),i=s[t];let l=i?i():e[t];if(t===A||t===h||t==="__proto__")return l;if(!i){const r=Object.getOwnPropertyDescriptor(e,t);J()&&(typeof l!="function"||e.hasOwnProperty(t))&&!(r&&r.get)&&(l=x(s,t,l)())}return Y(l)?ve(l):l},has(e,t){return t===ee||t===S||t===se||t===A||t===h||t==="__proto__"?!0:(J()&&x(H(e,h),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:He,getOwnPropertyDescriptor:Ye};function q(e,t,n,s=!1){if(!s&&e[t]===n)return;const i=e[t],l=e.length;n===void 0?(delete e[t],e[h]&&e[h][t]&&i!==void 0&&e[h][t].$()):(e[t]=n,e[h]&&e[h][t]&&i===void 0&&e[h][t].$());let r=H(e,A),o;if((o=x(r,t,i))&&o.$(()=>n),Array.isArray(e)&&e.length!==l){for(let a=e.length;a<l;a++)(o=r[a])&&o.$();(o=x(r,"length",l))&&o.$(e.length)}(o=r[we])&&o.$()}function Ee(e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const i=n[s];q(e,i,t[i])}}function Ke(e,t){if(typeof t=="function"&&(t=t(e)),t=O(t),Array.isArray(t)){if(e===t)return;let n=0,s=t.length;for(;n<s;n++){const i=t[n];e[n]!==i&&q(e,n,i)}q(e,"length",s)}else Ee(e,t)}function N(e,t,n=[]){let s,i=e;if(t.length>1){s=t.shift();const r=typeof s,o=Array.isArray(e);if(Array.isArray(s)){for(let a=0;a<s.length;a++)N(e,[s[a]].concat(t),n);return}else if(o&&r==="function"){for(let a=0;a<e.length;a++)s(e[a],a)&&N(e,[a].concat(t),n);return}else if(o&&r==="object"){const{from:a=0,to:u=e.length-1,by:f=1}=s;for(let p=a;p<=u;p+=f)N(e,[p].concat(t),n);return}else if(t.length>1){N(e[s],t,[s].concat(n));return}i=e[s],n=[s].concat(n)}let l=t[0];typeof l=="function"&&(l=l(i,n),l===i)||s===void 0&&l==null||(l=O(l),s===void 0||Y(i)&&Y(l)&&!Array.isArray(l)?Ee(i,l):q(e,s,l))}function Ve(...[e,t]){const n=O(e||{}),s=Array.isArray(n),i=ve(n);function l(...r){$e(()=>{s&&r.length===1?Ke(n,r[0]):N(n,r)})}return[i,l]}const[k,Q]=Ve({url:"",title:"",contentType:"",isPlaying:!1,currentTime:0}),We={loadStream({url:e,title:t,contentType:n}){Q({url:e,title:t,contentType:n})},updatePlayback(e){Q(e)},reset(){Q({url:"",title:"",contentType:"",isPlaying:!1,currentTime:0})}},I={_impl:We,use(e){return e&&typeof e=="object"&&(this._impl=e),this},loadStream(e){return this._impl?.loadStream?.(e)},updatePlayback(e){return this._impl?.updatePlayback?.(e)},reset(){return this._impl?.reset?.()}},[oe,re]=V(!1),[ae,X]=V(!1);let E=null;function ze(e){console.log("Loading stream:",e);try{I.loadStream({url:e.url||"",title:e.title||"",contentType:e.contentType||"application/dash+xml"});const t=E?.getPlayerManager();if(t&&e.url){const n=new cast.framework.messages.MediaInformation;n.contentId=e.url,n.contentType=e.contentType||"application/dash+xml",e.title&&(n.metadata=new cast.framework.messages.GenericMediaMetadata,n.metadata.title=e.title);const s=new cast.framework.messages.LoadRequestData;s.media=n,s.autoplay=e.autoplay!==!1,t.load(s),console.log("Media loaded successfully")}else console.warn("Player manager not available or no URL provided")}catch(t){console.error("Error loading stream:",t)}}function Qe(){return new Promise((e,t)=>{if(typeof cast<"u"&&cast.framework&&cast.framework.CastReceiverContext){e();return}let n=0;const s=20,i=setInterval(()=>{n++,typeof cast<"u"&&cast.framework&&cast.framework.CastReceiverContext?(clearInterval(i),e()):n>=s&&(clearInterval(i),t(new Error("Cast framework did not load within timeout")))},100)})}async function Xe(){try{if(await Qe(),!cast.framework?.CastReceiverContext)throw new Error("CastReceiverContext not available");if(!cast.framework?.events?.EventType)throw new Error("Cast framework events not available");E=cast.framework.CastReceiverContext.getInstance();const e=E.getPlayerManager(),t=cast.framework.events.EventType,n=cast.framework.system?.EventType;console.log("Available event types:",{PLAYER_STATE_CHANGED:t.PLAYER_STATE_CHANGED,TIME_UPDATE:t.TIME_UPDATE,SENDER_CONNECTED:n?.SENDER_CONNECTED,SENDER_DISCONNECTED:n?.SENDER_DISCONNECTED}),t.PLAYER_STATE_CHANGED?e.addEventListener(t.PLAYER_STATE_CHANGED,s=>{console.log("Player state changed:",s.playerState),s.playerState===cast.framework.messages.PlayerState.PLAYING?I.updatePlayback({isPlaying:!0}):s.playerState===cast.framework.messages.PlayerState.PAUSED&&I.updatePlayback({isPlaying:!1})}):console.warn("PLAYER_STATE_CHANGED event type not available"),t.TIME_UPDATE?e.addEventListener(t.TIME_UPDATE,s=>{I.updatePlayback({currentTime:s.currentMediaTime||0})}):console.warn("TIME_UPDATE event type not available"),E.addCustomMessageListener("urn:x-cast:com.ditu.control",s=>{console.log("Received custom message:",s),s.data?.type==="LOAD_STREAM"&&ze(s.data.streamData)}),re(!0),X(!1),n?.SENDER_CONNECTED?E.addEventListener(n.SENDER_CONNECTED,()=>{console.log("Sender connected"),X(!0)}):console.warn("SENDER_CONNECTED event type not available"),n?.SENDER_DISCONNECTED?E.addEventListener(n.SENDER_DISCONNECTED,()=>{console.log("Sender disconnected"),X(!1)}):console.warn("SENDER_DISCONNECTED event type not available"),E.start(),console.log("Cast receiver initialized successfully")}catch(e){throw console.error("Error initializing Cast receiver:",e),re(!1),e}}const Se={simulateLoadStream(e={}){const t={url:e.url||"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",title:e.title||"Test Video",contentType:e.contentType||"video/mp4",autoplay:e.autoplay!==!1,...e};if(console.log("ðŸ§ª Simulating LOAD_STREAM message:",t),typeof cast<"u"){console.log("Cast framework available - would normally receive message from sender");try{cast.framework.CastReceiverContext.getInstance(),console.log("Cast context available, would normally receive this from sender")}catch(n){console.warn("Cast context not available for simulation:",n.message)}}return t},logCastState(){if(console.log("ðŸ” Current Cast State:"),console.log("- Cast framework available:",typeof cast<"u"),typeof cast<"u")try{const e=cast.framework.CastReceiverContext.getInstance();console.log("- Cast context:",!!e),console.log("- Player manager:",!!e?.getPlayerManager())}catch(e){console.log("- Cast context error:",e.message)}}};typeof window<"u"&&(window.testUtils=Se);var Je=he("<div class=app-container><h1 class=app-title>Custom Receiver Â· Solid</h1><div class=status-section><div>Cast Ready: </div><div>Sender Connected: </div></div><div class=video-info><div class=video-info-item><span class=video-info-label>Title:</span><span class=video-info-value></span></div><div class=video-info-item><span class=video-info-label>URL:</span><span class=video-info-value></span></div><div class=video-info-item><span class=video-info-label>Playing:</span><span class=video-info-value></span></div><div class=video-info-item><span class=video-info-label>Current Time:</span><span class=video-info-value>s</span></div></div><div class=developer-info><div class=developer-info-title>Developer Info:</div><div class=developer-info-item>â€¢ Open browser console to see detailed logs</div><div class=developer-info-item>â€¢ Use <code>window.testUtils.logCastState()</code> to check Cast state</div><div class=developer-info-item>â€¢ Use <code>window.testUtils.simulateLoadStream()</code> to test loading"),Ze=he("<div class=error-message><strong>Error:</strong> ");function et(){const[e,t]=V("");return Le(async()=>{try{await Xe(),t(""),console.log("âœ… Cast receiver app loaded successfully"),console.log("ðŸ”§ Test utilities available as window.testUtils or use testUtils in console"),Se.logCastState()}catch(n){console.error("Failed to initialize Cast receiver:",n),t(n.message)}}),(()=>{var n=Je(),s=n.firstChild,i=s.nextSibling,l=i.firstChild;l.firstChild;var r=l.nextSibling;r.firstChild;var o=i.nextSibling,a=o.firstChild,u=a.firstChild,f=u.nextSibling,p=a.nextSibling,_=p.firstChild,R=_.nextSibling,$=p.nextSibling,Ce=$.firstChild,be=Ce.nextSibling,Ae=$.nextSibling,Te=Ae.firstChild,ne=Te.nextSibling,_e=ne.firstChild;return y(n,(()=>{var m=Be(()=>!!e());return()=>m()&&(()=>{var C=Ze(),L=C.firstChild;return L.nextSibling,y(C,e,null),C})()})(),i),y(l,()=>oe()?"âœ“":"â³",null),y(r,()=>ae()?"âœ“":"âœ—",null),y(f,()=>k.title||"N/A"),y(R,()=>k.url||"N/A"),y(be,()=>k.isPlaying?"Yes":"No"),y(ne,()=>k.currentTime.toFixed(2),_e),j(m=>{var C=`status-item ${oe()?"status-ready":"status-pending"}`,L=`status-item ${ae()?"status-connected":"status-disconnected"}`;return C!==m.e&&ie(l,m.e=C),L!==m.t&&ie(r,m.t=L),m},{e:void 0,t:void 0}),n})()}Ge(()=>je(et,{}),document.getElementById("app"));
